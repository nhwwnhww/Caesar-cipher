<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>

    <script src="https://js.cx/libs/animate.js"></script>

    <title>Document</title>
    <style>
        
    </style>
    
</head>
<body data-bs-spy="scroll" data-bs-target=".navbar" data-bs-offset="50">

    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <div class="container-fluid">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#section1">Section 1</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#section2">Section 2</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#section3">Section 3</a>
            </li>
          </ul>
        </div>
    </nav>

    <div id="section1" class="container-fluid" style="height: 100vh;">

    </div>

    <div id="section2" class="container-fluid" style="height: 100vh;">

    </div>

    <div id="section3" class="container-fluid mt-3">
        <div class="row" style="height: 100vh;">
            <div class="col-md-2 col-1 col-lg-3 p-3 bg-primary text-white"></div>
            <div class="col-md-8 col-10 col-lg-6 p-3 bg-dark text-white d-flex flex-column">
                <h1 style="margin-top: 20vh;">Casear chipher</h1>

                <label for="">input your plaintext</label>

                <div class="input-group mb-3 input-group-sm">
                    <span class="input-group-text">Plaintext:</span>
                    <textarea type="text" class="form-control" id="input" rows="5"></textarea>
                </div>

                <label for="">'k' value</label>

                <div class="col-2">
                    <div class="input-group mb-3 input-group-sm">
                        <span class="input-group-text">key:</span>
                        <input type="text" class="form-control" id="k_value">
                    </div>
                </div>

                <div class="row">
                    <div class="col-1"></div>
                    <button onclick="output_encrypt()" class="btn btn-info col-4">encrypt</button>
                    <div class="col-2"></div>
                    <button onclick="output_decrypt()" class="btn btn-danger col-4">decrypt</button>
                    <div class="col-1"></div>
                </div>

                <div class="input-group mb-3 input-group-sm">
                    <span class="input-group-text">Ciphertext:</span>
                    <textarea type="text" class="form-control" disabled id="output" rows="5"></textarea>
                 </div>

                <h6 id="output2"></h6>
            </div>
            <div class="col-md-2 col-1 col-lg-3 p-3 bg-primary text-white"></div>
        </div>
    </div>

    <script>

        function output_encrypt(){
            let str = document.getElementById('input').value;
            let k = document.getElementById('k_value').value;
            let ans = rot(str,parseInt(k));

            let output = document.getElementById('output');

            document.getElementById('output').value = ans;
            animateText(output);
        }

        function animateText(textArea) {
            let text = textArea.value;
            let to = text.length,
                from = 0;

            animate({
                duration: 5000,
                timing: bounce,
                draw: function(progress) {
                let result = (to - from) * progress + from;
                textArea.value = text.substr(0, Math.ceil(result))
                }
        });
        }
        function bounce(timeFraction) {
            for (let a = 0, b = 1, result; 1; a += b, b /= 2) {
                if (timeFraction >= (7 - 4 * a) / 11) {
                return -Math.pow((11 - 6 * a - 11 * timeFraction) / 4, 2) + Math.pow(b, 2)
                }
            }
        }

        function full(){
            let str = document.getElementById('input').value;
            document.getElementById('show_all').value = str;
            let show = document.getElementById('show_all');
            show.innerHTML = "";
            for (let i = 1; i < 27;i++){
                let ans = rot(str,i);
                let h3 = document.createElement("h3");
                h3.innerText = ans;
                show.appendChild(h3);
            }
        }
        function output_decrypt(){
            let str = document.getElementById('input').value;
            let key = decrypt(str);
            document.getElementById('output2').innerText = 'Guess the key is ' + key;

            let k = Math.abs(key-26);
            let ans = rot(str,parseInt(k));

            let output = document.getElementById('output');

            document.getElementById('output').value = ans;
            animateText(output);
        }
        
        

    </script>
    <script src="./Casear_chipher_libary.js"></script>
    <script src="./word_frequency.js"></script>
</body>
</html>